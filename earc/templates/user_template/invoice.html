{% extends "user_base.html" %}
{% load static %}
{% load order_tags %}
{% block title %}
Invoice
{% endblock %}

{% block content %}
<main style="width: 100%; padding: 100px 50px;" class="d-flex flex-column align-order_objs-center">
    <div style="width: 90%; height: fit-content; display: flex; justify-content: space-around; padding-bottom: 150px;">
        <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
            <div>
                <h1 class="fw-bold">mobileArc</h1>
            </div>
            <div class="mt-3">
                <p class="fw-bold">Kannur, Kerala, India </p>
                <p class="fw-bold">670643</p>
            </div>
        </div>
        <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
            <h4>Invoice
                    {% if order_obj.order_payment.payment_status %}
                    <span class="badge bg-success">Paid</span>
                    {% elif order_obj.status == 5 %}
                    <span class="badge bg-danger">Cancel</span>
                    {% elif order_obj.status == 7 %}
                    <span class="badge bg-danger">Return & Refund</span>
                    {% else %}
                    <span class="badge bg-warning">Pending</span>
                    {% endif %}
            </h4>
            <p class="fw-bold">{{order_obj.order_payment.payment_mode}}</p>

        </div>
    </div>
    <div
        style="width: 90%; height: fit-content; display: flex; justify-content: space-around; padding-bottom: 50px; border-bottom: solid gray 1px;">
        <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
            <div>
                <h3 class="fw-bold">Billed to:</h3>
                <br>
                <p class="fw-bold">{{order_obj.order_customer.customer.username}}</p>
                <br>
                <p class="fw-bold">{{order_obj.order_address.building_name}}, {{order_obj.order_address.address}}</p>
                <p class="fw-bold">{{order_obj.order_address.city}}, {{order_obj.order_address.state}}, {{order_obj.order_address.pincode}}</p>
            </div>
        </div>
        <div style="width: 50%; display: flex; justify-content: center;">
            <div>
                <h4>Invoice date: <span style="font-size: 15px; margin-left: 10px;">{{order_obj.update_at}}</span></h4>
                <br>
                <h4>Order no: <span style="font-size: 15px; margin-left: 10px;">{{order_obj.cart_id}}</span></h4>
            </div>
        </div>
    </div>

    <div style="width: 90%; height: fit-content; display: flex; justify-content: space-around; padding-bottom: 50px;">
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; margin-top: 50px;">
            <h3 class="fw-bold">Order summary</h3>
            <div style="width: 90%; margin-top: 40px;">
                <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">No</th>
                        <th scope="col">Product</th>
                        <th scope="col">Storage</th>
                        <th scope="col">Price</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Total</th>
                      </tr>
                    </thead>
                    <tbody>
                     
                      <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>
                            <p class="fw-cold">{{order_obj.product.product_name}}</p>
                        </td>
                        <td>
                            <p class="fw-cold">{{order_obj.storage.rom}}/{{order_obj.storage.ram}}</p>
                        </td>
                        <td>
                            <p class="fw-cold">{% selling_price order_obj %}</p>
                        </td>
                        <td>
                            <p class="fw-cold">{{order_obj.quantity}}</p>
                        </td>
                        <td>
                            <p class="fw-cold">{{order_obj.total_price}}</p>
                        </td>
                      </tr>
                      
                      <tr>
                        <th scope="row" colspan="5" class="text-end fw-bold">Sub Total</th>
                        <td class="text-end fw-bold">{{order_obj.total_price}}</td>
                      </tr>
                    </tbody>
                  </table>
                  <div style="float: right;">
                    <div style="display: flex; justify-content: space-between;" class="gap-5">
                        <p class="fw-bold">Discount:</p>
                        <p>{{order_obj.product.discount_price}}</p>
                    </div>
                    <div style="display: flex; justify-content: space-between;" class="gap-5">
                        <p class="fw-bold">Coupon:</p>
                        <p>{{order_obj.coupon_amount}}</p>
                    </div>
                    <div style="display: flex; justify-content: space-between;" class="gap-5">
                        <p class="fw-bold">Tex:</p>
                        <p>0</p>
                    </div>
                    <div style="display: flex; justify-content: space-between;" class="gap-5">
                        <p class="fw-bold">Total:</p>
                        <p>{{order_obj.total_price}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top: 20px;">
        <a href="javascript:window.print()" class="btn btn-success me-1"><i class="fa fa-print"></i></a>
    </div>






</main>
{% endblock %}