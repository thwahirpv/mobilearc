{% extends "base_page.html" %}
{% load static %}

{% block title %}
Homeettwe
{% endblock %}


{% block content %}


    
    <main class="container-fluid">
        {% include 'admin_nav.html' %}
        <div style="width: 100%; display: flex; flex-direction: column;">
            <div class="card-body" id="sales_report">
                <h3 class="text-center">Sales report</h3>
                <div class="table-responsive" style="margin-top: 50px;">
                    <table class="table table-hover">
                        <thead class="" style="background: rgb(206, 205, 205);">
                            <tr>
                                <th scope="col">Date & Time</th>
                                <th scope="col">Customer</th>
                                <th scope="col">Porduct</th>
                                <th scope="col">Color</th>
                                <th scope="col">Storage</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Price</th>
                                <th scope="col">Discount</th>
                                <th scope="col">Storage price</th>
                                <th scope="col">Coupen</th>
                                <th scope="col">Total</th>
                                <!-- <th scope="col" class="text-end"> Action </th> -->
                            </tr>
                        </thead>
                        <tbody>
                           {% for item in sales_data %}
                            <tr>
                                <td class="fw-bold">{{item.update_at}}</td>
                                <td class="fw-bold">{{item.order_customer.customer.email}}</td>
                                <td class="fw-bold">{{item.product.product_name}}</td>
                                <td class="fw-bold">{{item.color.color_name}}</td>
                                <td class="fw-bold">{{item.storage.rom}}/{{item.storage.ram}}</td>
                                <td class="fw-bold">{{item.quantity}}</td>
                                <td class="fw-bold">{{item.product.price}}</td>
                                <td class="fw-bold">{{item.product.discount_price}}</td>
                                <td class="fw-bold">{{item.storage.price_of_size}}</td>
                                <td class="fw-bold">{{item.coupon_amount}}</td>
                                <td class="fw-bold">{{item.total_price}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div> <!-- table-responsive //end -->
            </div> <!-- card-body end// -->
            <button type="button" onclick="download_pdf()" class="btn btn-sm btn-primary" style="width: 200px; align-self: center; margin-top: 20px;">Download pdf</button>
        </div> <!-- card end// -->
        </div>
    </main>

    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

  <script>
    function download_pdf(){
        salesReport = document.getElementById('sales_report')
        html2pdf().from(salesReport).save();
    }
  </script>
{% endblock %}